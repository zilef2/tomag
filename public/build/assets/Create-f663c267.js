import{k as O,T as D,C as N,x as $,l as A,f as n,a as l,w as h,o as c,b as s,t as _,u as a,g as m,d as j,n as B,e as M}from"./app-64491542.js";import{_ as p}from"./InputError-fa3e1639.js";import{_ as w,a as y}from"./TextInput-8835f8f7.js";import{_ as U,a as E}from"./SecondaryButton-4a877555.js";import{_ as H}from"./PrimaryButton-4c3adb2e.js";import{C as u}from"./vue-select-d9b12732.js";/* empty css             */import{T as F,a as S,D as q}from"./global-8f0e871b.js";const I={class:"space-y-6 dark:text-white"},P=["onSubmit"],z={class:"text-lg font-medium text-gray-900 dark:text-white"},J={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 gap-6"},W={key:0,id:"opcinesActividadO",class:"xl:col-span-2 col-span-1"},X=s("label",{class:"dark:text-white",name:""},[j(" Reportar en nombre de: "),s("small",null,"(Opcional) ")],-1),G={id:"opcinesActividadO",class:"xl:col-span-2 col-span-1"},K=s("label",{class:"dark:text-white"}," Tipo de reporte ",-1),L={class:"xl:col-span-1 col-span-1"},Q={class:"dark:text-white col-span-1"},Y={key:1,id:"Sordentrabajo",class:"xl:col-span-2 col-span-1"},Z=s("label",{name:"Select_ordentrabajo",class:"dark:text-white"}," Orden de trabajo ",-1),ee={id:"Scentrotrabajo",class:"col-span-1"},ae=s("label",{name:"centrotrabajo_id",class:"dark:text-white"}," Centro de trabajo ",-1),oe={key:2,id:"actividad",class:"xl:col-span-2 col-span-1"},te=s("label",{name:"actividad_id",class:"dark:text-white"}," Actividad ",-1),ie={key:3,id:"reproceso",class:"xl:col-span-2 col-span-1"},le=s("label",{name:"reproceso_id",class:"dark:text-white"}," Reproceso",-1),se={key:4,id:"disponibilidad",class:"xl:col-span-3 col-span-1"},re=s("label",{name:"disponibilidad_id",class:"dark:text-white"}," Disponibilidad",-1),de={class:"mb-8 mt-[360px] flex justify-end"},ne={key:0,class:"mx-12 px-8 text-lg font-medium text-red-600 bg-red-50 dark:text-white dark:bg-gray-800"},je={__name:"Create",props:{show:Boolean,title:String,roles:Object,losSelect:Object,numberPermissions:Number,Trabajadores:Object},emits:["close"],setup(v,{emit:b}){const d=v,r=O({params:{pregunta:""},actividad_id:d.losSelect.actividad,centrotrabajo_id:d.losSelect.centrotrabajo,disponibilidad_id:d.losSelect.disponibilidad,ordentrabajo_id:d.losSelect.ordentrabajo,reproceso_id:d.losSelect.reproceso,valorInactivo:"NA",Select_ordentrabajo:[],mensajeFalta:"",BanderaTipo:!0,limiteMinimo:"",tempCentro:0}),e=D({...Object.fromEntries(["tipoReporte","fecha","hora_inicial","hora_final","actividad_id","centrotrabajo_id","disponibilidad_id","operario_id","ordentrabajo_id","reproceso_id","Select_ordentrabajo","otitem","user_id"].map(i=>[i,""]))}),k=()=>{let i=new Date;i.setHours(i.getHours()-2);let o=t=>t<10?`0${t}`:t;return`${o(i.getHours())}:${o(i.getMinutes())}`};N(()=>{r.limiteMinimo=k(),setInterval(()=>{r.limiteMinimo=k()},6e4)});let g=i=>{let o="";try{i.forEach((t,f)=>{if(typeof e[t]>"u"||e[t]===null||e[t].value===null||e[t].length===0)throw o=t,new Error("BreakException")})}catch{}return o},C=()=>{let i=e.tipoReporte.value,o=!0;const t=". Campo obligatorio";let f=new Date().getHours();console.log(f),console.log(`espacio
`),console.log(e.hora_inicial),console.log(`espacio2
`);let V=q(f+":00",e.hora_inicial);if(console.log(V),V>0)return"Ha pasado mucho tiempo!";i===0&&(o=g(["Select_ordentrabajo","centrotrabajo_id","actividad_id"])),i===1&&(o=g(["centrotrabajo_id","Select_ordentrabajo","actividad_id","reproceso_id"])),i===2&&(o=g(["centrotrabajo_id","disponibilidad_id"]));let T={Select_ordentrabajo:"Orden trabajo",actividad_id:"Actividad",reproceso_id:"Reproceso",centrotrabajo_id:"Centro de trabajo",disponibilidad_id:"Disponibilidad"};return o!==""?T[o]+t:o};$(()=>{if(d.show){if(r.BanderaTipo&&(e.tipoReporte={title:"Actividad",value:0},r.BanderaTipo=!1),e.errors={},e.fecha===null||e.fecha===""){let i=new Date;e.fecha=F(i).substring(0,10),e.hora_inicial=S()}}else r.BanderaTipo=!0}),A(()=>e.tipoReporte,i=>{e.actividad_id=null,e.centrotrabajo_id=null,e.disponibilidad_id=null,e.operario_id=null,e.ordentrabajo_id=null,e.reproceso_id=null,e.Select_ordentrabajo=null});const x=()=>{e.ordentrabajo_id=e.Select_ordentrabajo,r.mensajeFalta=C(),e.hora_inicial=S(),r.mensajeFalta===""&&setTimeout(e.post(route("reporte.store"),{preserveScroll:!0,onSuccess:()=>{b("close"),e.reset()},onError:()=>alert(JSON.stringify(e.errors,null,4)),onFinish:()=>null}),500)},R=[{title:"Actividad",value:0},{title:"Reproceso",value:1},{title:"Disponibilidad(paro)",value:2}];return(i,o)=>(c(),n("section",I,[l(U,{show:d.show,onClose:o[10]||(o[10]=t=>b("close")),maxWidth:"3xl"},{default:h(()=>[s("form",{class:"px-6 my-8",onSubmit:M(x,["prevent"])},[s("h2",z,_(i.lang().label.add)+" "+_(d.title),1),s("div",J,[d.numberPermissions>1?(c(),n("div",W,[X,l(a(u),{options:d.Trabajadores,label:"title",class:"dark:bg-gray-400",modelValue:a(e).user_id,"onUpdate:modelValue":o[0]||(o[0]=t=>a(e).user_id=t)},null,8,["options","modelValue"])])):m("",!0),s("div",G,[K,l(a(u),{options:R,label:"title",class:"dark:bg-gray-400",modelValue:a(e).tipoReporte,"onUpdate:modelValue":o[1]||(o[1]=t=>a(e).tipoReporte=t)},null,8,["modelValue"])]),s("div",L,[l(w,{for:"fecha",value:i.lang().label.fecha,class:"dark:text-white"},null,8,["value"]),l(y,{id:"fecha",type:"date",class:"mt-1 block w-full bg-gray-200 dark:text-white",modelValue:a(e).fecha,"onUpdate:modelValue":o[2]||(o[2]=t=>a(e).fecha=t),disabled:"",placeholder:"fecha",error:a(e).errors.fecha},null,8,["modelValue","error"]),l(p,{class:"mt-2",message:a(e).errors.fecha},null,8,["message"])]),s("div",Q,[l(w,{for:"hora_inicial",value:i.lang().label["hora inicial"]+", min: "+r.limiteMinimo},null,8,["value"]),l(y,{id:"hora_inicial",type:"time",class:"mt-1 block w-full",modelValue:a(e).hora_inicial,"onUpdate:modelValue":o[3]||(o[3]=t=>a(e).hora_inicial=t),placeholder:"hora_inicial",error:a(e).errors.hora_inicial,step:"60"},null,8,["modelValue","error"]),l(p,{class:"mt-2",message:a(e).errors.hora_inicial},null,8,["message"])]),a(e).tipoReporte.value!==2?(c(),n("div",Y,[Z,l(a(u),{options:v.losSelect.ordentrabajo,label:"title",class:"dark:bg-gray-400",modelValue:a(e).Select_ordentrabajo,"onUpdate:modelValue":o[4]||(o[4]=t=>a(e).Select_ordentrabajo=t)},null,8,["options","modelValue"]),l(p,{class:"mt-2",message:a(e).errors.ordentrabajo_id},null,8,["message"])])):m("",!0),s("div",ee,[ae,l(a(u),{options:r.centrotrabajo_id,label:"title",class:"dark:bg-gray-400",modelValue:a(e).centrotrabajo_id,"onUpdate:modelValue":o[5]||(o[5]=t=>a(e).centrotrabajo_id=t)},null,8,["options","modelValue"]),l(p,{class:"mt-2",message:a(e).errors.centrotrabajo_id},null,8,["message"])]),a(e).tipoReporte.value===0||a(e).tipoReporte.value===1?(c(),n("div",oe,[te,l(a(u),{options:r.actividad_id,label:"title",required:"",modelValue:a(e).actividad_id,"onUpdate:modelValue":o[6]||(o[6]=t=>a(e).actividad_id=t),class:"dark:bg-gray-400"},null,8,["options","modelValue"]),l(p,{class:"mt-2",message:a(e).errors.actividad_id},null,8,["message"])])):m("",!0),a(e).tipoReporte.value==1?(c(),n("div",ie,[le,l(a(u),{options:r.reproceso_id,label:"title",required:"",modelValue:a(e).reproceso_id,"onUpdate:modelValue":o[7]||(o[7]=t=>a(e).reproceso_id=t),class:"dark:bg-gray-400"},null,8,["options","modelValue"]),l(p,{class:"mt-2",message:a(e).errors.reproceso_id},null,8,["message"])])):m("",!0),a(e).tipoReporte.value==2?(c(),n("div",se,[re,l(a(u),{options:r.disponibilidad_id,label:"title",required:"",modelValue:a(e).disponibilidad_id,"onUpdate:modelValue":o[8]||(o[8]=t=>a(e).disponibilidad_id=t),class:"dark:bg-gray-400"},null,8,["options","modelValue"]),l(p,{class:"mt-2",message:a(e).errors.disponibilidad_id},null,8,["message"])])):m("",!0)]),s("div",de,[r.mensajeFalta!==""?(c(),n("h2",ne,_(r.mensajeFalta),1)):m("",!0),l(E,{disabled:a(e).processing,onClick:o[9]||(o[9]=t=>b("close"))},{default:h(()=>[j(_(i.lang().button.close),1)]),_:1},8,["disabled"]),l(H,{class:B(["ml-3",{"opacity-25":a(e).processing}]),disabled:a(e).processing,onClick:x},{default:h(()=>[j(_(a(e).processing?i.lang().button.add+"...":i.lang().button.add),1)]),_:1},8,["class","disabled"])])],40,P)]),_:1},8,["show"])]))}};export{je as default};
