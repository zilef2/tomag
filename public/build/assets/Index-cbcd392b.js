import{o as t,f as l,b as o,k as L,K as M,l as A,O as H,x as W,m as P,c,w as h,p as q,d as K,t as p,g as n,a as u,q as f,v as b,u as m,s as O,F as g,j as w}from"./app-64491542.js";import{_ as R,a as G}from"./AuthenticatedLayout-f13e9df2.js";import{a as S}from"./TextInput-8835f8f7.js";import{_ as $}from"./PrimaryButton-4c3adb2e.js";import{_ as J}from"./SelectInput-457de6e4.js";import{_ as T}from"./DangerButton-c594852b.js";import{r as V,_ as Q,a as X}from"./Pagination-85722726.js";import Y from"./Create-f663c267.js";import Z from"./Edit-26583620.js";import ee from"./TerminarReporte-e7d20cdc.js";import re from"./Delete-400b57e4.js";import te from"./DeleteBulk-f1ab36a3.js";import{_ as se}from"./Checkbox-ff0406d7.js";import{_ as I,r as oe}from"./InfoButton-b50dc442.js";import{b as B,n as k,f as x}from"./global-8f0e871b.js";import{C as ae}from"./vue-select-d9b12732.js";/* empty css             */import"./ApplicationLogo-194673e3.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./index-0390d3e5.js";import"./InputError-fa3e1639.js";import"./SecondaryButton-4a877555.js";import"./vue-datepicker-265c879c.js";function le(_,s){return t(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M11.47 2.47a.75.75 0 011.06 0l3.75 3.75a.75.75 0 01-1.06 1.06l-2.47-2.47V21a.75.75 0 01-1.5 0V4.81L8.78 7.28a.75.75 0 01-1.06-1.06l3.75-3.75z","clip-rule":"evenodd"})])}function ne(_,s){return t(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M1.72 5.47a.75.75 0 011.06 0L9 11.69l3.756-3.756a.75.75 0 01.985-.066 12.698 12.698 0 014.575 6.832l.308 1.149 2.277-3.943a.75.75 0 111.299.75l-3.182 5.51a.75.75 0 01-1.025.275l-5.511-3.181a.75.75 0 01.75-1.3l3.943 2.277-.308-1.149a11.194 11.194 0 00-3.528-5.617l-3.809 3.81a.75.75 0 01-1.06 0L1.72 6.53a.75.75 0 010-1.061z","clip-rule":"evenodd"})])}const de={class:"face"},ie=o("div",{class:"hand"},[o("div",{class:"hand"},[o("div",{class:"hour"}),o("div",{class:"minute"})])],-1),pe=[ie],me={__name:"ClockWorking",props:{},setup(_){return(s,j)=>(t(),l("div",de,pe))}};const ce={class:"space-y-4"},ue={class:"px-4 sm:px-0"},_e={class:"rounded-lg overflow-hidden w-fit"},fe={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},ye={class:"flex justify-between px-0 my-1 h-22 overflow-x-auto overflow-y-hidden pb-2"},he={class:"inline-flex gap-2"},be={key:0,class:"mx-1 mt-4 w-40 flex gap-4"},ke={class:"my-1"},ge=o("label",{for:"soloval",class:"text-sm mx-2 whitespace-nowrap"},"Tiempo Estimado",-1),we={class:"inline-flex my-1"},ve=o("label",{for:"soloval",class:"text-sm mx-2 whitespace-nowrap"},"Mostrar todos",-1),xe={key:1,class:"mt-2 sm:relative md:fixed z-30 md:left-1/3 lg:left-1/2"},Ce=o("label",{name:"centrotrabajo_id",class:"mx-2 mt-2 text-sm dark:text-white"}," Centro de trabajo ",-1),Oe={key:0,class:"mt-4 sm:flex-wrap lg:flex-inline gap-4 right-0"},$e={class:"max-h-[630px] overflow-y-scroll"},je={key:0,class:"w-full"},Pe={class:"-mt-1 top-0 bg-gray-200 sticky z-[5] capitalize text-sm dark:border-gray-700 dark:bg-black"},Se={class:"dark:bg-gray-900/50 text-left"},Te={key:0,class:"px-2 py-4 text-center dark:bg-black"},Ve=o("th",{class:"px-2 py-4"},"Accion",-1),Ie=o("th",{class:"px-2 py-4 text-center"},"#",-1),Be=["onClick"],De={class:"flex justify-between items-center"},Ee={key:0,class:"w-full bg-white border border-blue-500 inamovible"},ze={class:"dark:bg-gray-900/50 text-left"},Fe=o("th",{class:"px-2 py-4"},null,-1),Ue=o("th",{class:"px-2 py-4"},null,-1),Ne={class:"px-2 py-4 text-center"},Le={class:"px-2 py-4 cursor-pointer"},Me={class:"flex justify-between items-center"},Ae={class:"w-20 text-sm"},He=o("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},null,-1),We=o("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},null,-1),qe=o("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Ke={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Re={key:0},Ge={key:1},Je={key:2},Qe={key:3},Xe={key:4},Ye={key:5},Ze={key:6},er={key:7},rr={key:8},tr={key:0,class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},sr=["value"],or={class:"whitespace-nowrap py-4 w-12 px-2 sm:py-3"},ar={class:"flex justify-center items-center"},lr={class:"rounded-md overflow-hidden"},nr={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},dr={class:"whitespace-wrap py-4 px-2 sm:py-3"},ir={key:0},pr={key:1},mr={key:2},cr={key:3},ur={key:4},_r={key:5},fr={key:6},yr={key:7},hr={key:8},br={key:1,class:"text-center text-xl my-8"},kr={key:0,class:"flex justify-between items-center p-2 border-t border-gray-200 dark:border-gray-700"},Hr={__name:"Index",props:{fromController:Object,total:Number,filters:Object,breadcrumbs:Object,perPage:Number,title:String,numberPermissions:Number,losSelect:Object,Trabajadores:Object},setup(_){const s=_,{_:j,debounce:D,pickBy:E}=q,r=L({params:{search:s.filters.searchDate,field:s.filters.field,order:s.filters.order,perPage:s.perPage,searchdia:s.filters.searchdia,soloTiEstimado:s.filters.soloTiEstimado,ultimosmeses:s.filters.ultimosmeses,FiltroCentro:s.filters.FiltroCentro},generico:null,selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,TerminarOpen:!1,deleteOpen:!1,dataSet:M().props.app.perpage,totalEmpleados:0,deleteBulkOpen:!1,hayCongelado:0}),z=(d,a)=>{a&&(r.params.field=d,r.params.order=r.params.order==="asc"?"desc":"asc")};A(()=>j.cloneDeep(r.params),D(()=>{let d=E(r.params);H.get(route("reporte.index"),d,{replace:!0,preserveState:!0,preserveScroll:!0})},350));const F=d=>{var a;d.target.checked===!1?r.selectedId=[]:(a=s.fromController)==null||a.data.forEach(y=>{r.selectedId.push(y.id)})},U=()=>{var d;r.multipleSelect=((d=s.reportes)==null?void 0:d.data.length)===r.selectedId.length};W(()=>{});const v=[{order:"fecha",label:"fecha",type:"date",CanOrder:!0},{order:"operario_id",label:"operario",type:"foreign",nameid:"operario_s",CanOrder:!0},{order:"hora_inicial",label:"hora inicial",type:"time",CanOrder:!0},{order:"hora_final",label:"hora final",type:"time",CanOrder:!0},{order:"tiempo_transcurrido",label:"Tiempo Transcurrido",type:"decimal",nameid:"tiempo_transcurrido",CanOrder:!0},{order:"ordentrabajo_id",label:"ordentrabajo",type:"foreign",nameid:"ordentrabajo_s",CanOrder:!0},{order:"centrotrabajo_id",label:"centrotrabajo",type:"foreign",nameid:"centrotrabajo_s",CanOrder:!0},{order:"actividad_id",label:"actividad",type:"foreign",nameid:"actividad_s",CanOrder:!0},{order:"disponibilidad_id",label:"disponibilidad",type:"foreign",nameid:"disponibilidad_s",CanOrder:!0},{order:"reproceso_id",label:"reproceso",type:"foreign",nameid:"reproceso_s",CanOrder:!0}];return(d,a)=>{const y=P("tooltip"),N=P("sticky");return t(),c(R,null,{default:h(()=>[o("div",ce,[o("div",ue,[o("div",_e,[d.can(["create reporte"])?(t(),c($,{key:0,class:"rounded-md mt-4",onClick:a[0]||(a[0]=e=>r.createOpen=!0)},{default:h(()=>[K(p(d.lang().button.add)+" "+p(s.title),1)]),_:1})):n("",!0),d.can(["create reporte"])?(t(),c(Y,{key:1,numberPermissions:s.numberPermissions,show:r.createOpen,onClose:a[1]||(a[1]=e=>r.createOpen=!1),title:s.title,losSelect:s.losSelect,Trabajadores:s.Trabajadores},null,8,["numberPermissions","show","title","losSelect","Trabajadores"])):n("",!0),d.can(["update reporte"])&&_.numberPermissions>1?(t(),c(Z,{key:2,numberPermissions:s.numberPermissions,show:r.editOpen,onClose:a[2]||(a[2]=e=>r.editOpen=!1),generica:r.generico,title:s.title,losSelect:s.losSelect,Trabajadores:s.Trabajadores},null,8,["numberPermissions","show","generica","title","losSelect","Trabajadores"])):n("",!0),d.can(["read reporte"])?(t(),c(ee,{key:3,numberPermissions:s.numberPermissions,show:r.TerminarOpen,onClose:a[3]||(a[3]=e=>r.TerminarOpen=!1),generica:r.generico,title:s.title},null,8,["numberPermissions","show","generica","title"])):n("",!0),d.can(["delete reporte"])?(t(),c(re,{key:4,numberPermissions:s.numberPermissions,show:r.deleteOpen,onClose:a[4]||(a[4]=e=>r.deleteOpen=!1),generica:r.generico,title:s.title},null,8,["numberPermissions","show","generica","title"])):n("",!0),u(te,{show:r.deleteBulkOpen,onClose:a[5]||(a[5]=e=>(r.deleteBulkOpen=!1,r.multipleSelect=!1,r.selectedId=[])),selectedId:r.selectedId,title:s.title},null,8,["show","selectedId","title"])])]),o("div",fe,[o("div",ye,[o("div",he,[u(J,{modelValue:r.params.perPage,"onUpdate:modelValue":a[6]||(a[6]=e=>r.params.perPage=e),dataSet:r.dataSet,class:"ml-2 mt-4 h-12"},null,8,["modelValue","dataSet"]),f((t(),c(T,{onClick:a[7]||(a[7]=e=>r.deleteBulkOpen=!0),class:"px-3 py-1.5 h-10 my-auto"},{default:h(()=>[u(m(V),{class:"w-5 h-5"})]),_:1})),[[b,r.selectedId.length!==0&&d.can(["delete reporte"])],[y,d.lang().tooltip.delete_selected]]),f((t(),c($,{onClick:a[8]||(a[8]=e=>r.hayCongelado=r.selectedId[0]),class:"px-3 py-1.5 h-10 my-auto"},{default:h(()=>[u(m(le),{class:"w-5 h-5"})]),_:1})),[[b,r.selectedId.length!==0&&d.can(["delete reporte"])],[y,"Congelar"]]),_.numberPermissions>1?(t(),l("div",be,[o("div",ke,[ge,_.filters!==null?f((t(),l("input",{key:0,"onUpdate:modelValue":a[9]||(a[9]=e=>r.params.soloTiEstimado=e),id:"soloval",type:"checkbox",class:"bg-gray-200 h-5 w-5 ml-[12px]"},null,512)),[[O,r.params.soloTiEstimado]]):n("",!0),o("div",we,[ve,_.filters!==null?f((t(),l("input",{key:0,"onUpdate:modelValue":a[10]||(a[10]=e=>r.params.ultimosmeses=e),id:"soloval",type:"checkbox",class:"bg-gray-200 h-5 w-5 ml-[34px]"},null,512)),[[O,r.params.ultimosmeses]]):n("",!0)])])])):n("",!0),_.numberPermissions>1?(t(),l("div",xe,[Ce,u(m(ae),{options:s.losSelect.centrotrabajo,label:"title",class:"dark:bg-gray-400 w-64 mt-1 z-20",modelValue:r.params.FiltroCentro,"onUpdate:modelValue":a[11]||(a[11]=e=>r.params.FiltroCentro=e)},null,8,["options","modelValue"])])):n("",!0)]),_.numberPermissions>1?(t(),l("div",Oe,[s.numberPermissions>1?(t(),c(S,{key:0,modelValue:r.params.searchdia,"onUpdate:modelValue":a[12]||(a[12]=e=>r.params.searchdia=e),type:"number",max:"31",min:"0",class:"mx-1 xl:mr-2 w-32 rounded-lg sm:h-6 lg:h-12 mt-1",placeholder:"Buscar día"},null,8,["modelValue"])):n("",!0),s.numberPermissions>1?(t(),c(S,{key:1,modelValue:r.params.searchDate,"onUpdate:modelValue":a[13]||(a[13]=e=>r.params.searchDate=e),type:"date",class:"mx-1 xl:mr-2 w-32 rounded-lg sm:h-6 lg:h-12 mt-1",placeholder:"Buscar por Fecha (mes o año) "},null,8,["modelValue"])):n("",!0)])):n("",!0)]),o("div",$e,[s.total>0?(t(),l("table",je,[o("thead",Pe,[o("tr",Se,[s.numberPermissions>1?(t(),l("th",Te,[u(se,{checked:r.multipleSelect,"onUpdate:checked":a[14]||(a[14]=e=>r.multipleSelect=e),onChange:F},null,8,["checked"])])):n("",!0),Ve,Ie,(t(),l(g,null,w(v,e=>o("th",{class:"px-2 py-4 cursor-pointer min-w-min",onClick:C=>z(e.order,e.CanOrder)},[o("div",De,[o("span",null,p(d.lang().label[e.label]),1),e.CanOrder?(t(),c(m(X),{key:0,class:"w-4 h-4"})):n("",!0)])],8,Be)),64))])]),o("tbody",null,[r.hayCongelado!==0?f((t(),l("div",Ee,[o("tr",ze,[Fe,Ue,o("th",Ne,[f((t(),c($,{onClick:a[15]||(a[15]=e=>r.hayCongelado=0),class:"px-3 py-1.5"},{default:h(()=>[u(m(ne),{class:"w-5 h-5"})]),_:1})),[[b,r.hayCongelado&&d.can(["delete reporte"])],[y,"Descongelar"]])]),(t(),l(g,null,w(v,e=>o("th",Le,[o("div",Me,[o("p",Ae,p(d.lang().label[e.label]),1)])])),64))]),o("tr",null,[He,We,qe,(t(),l(g,null,w(v,e=>o("td",Ke,[e.type==="text"?(t(),l("span",Re,p(s.fromController.data[0][e.order]),1)):n("",!0),e.type==="time"?(t(),l("span",Ge,p(m(B)(s.fromController.data[0][e.order])),1)):n("",!0),e.type==="number"?(t(),l("span",Je,p(m(k)(s.fromController.data[0][e.order],0,!1)),1)):n("",!0),e.type==="decimal"?(t(),l("span",Qe,p(m(k)(s.fromController.data[0][e.order],1,!1)),1)):n("",!0),e.type==="dinero"?(t(),l("span",Xe,p(m(k)(s.fromController.data[0][e.order],0,!0)),1)):n("",!0),e.type==="date"?(t(),l("span",Ye,p(m(x)(s.fromController.data[0][e.order],"")),1)):n("",!0),e.type==="datetime"?(t(),l("span",Ze,p(m(x)(s.fromController.data[0][e.order],"conLaHora")),1)):n("",!0),e.type==="foreign"?(t(),l("span",er,p(s.fromController.data[0][e.nameid]),1)):n("",!0),e.order==="hora_final"&&s.fromController.data[0][e.order]==null?(t(),l("span",rr,"-")):n("",!0)])),64))])])),[[N,{zIndex:100}]]):n("",!0),(t(!0),l(g,null,w(s.fromController.data,(e,C)=>(t(),l("tr",{key:C,class:"hover:dark:bg-gray-900/20"},[s.numberPermissions>1?(t(),l("td",tr,[f(o("input",{class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:U,value:e.id,"onUpdate:modelValue":a[16]||(a[16]=i=>r.selectedId=i)},null,40,sr),[[O,r.selectedId]])])):n("",!0),o("td",or,[o("div",ar,[o("div",lr,[f((t(),c(I,{type:"button",onClick:i=>(r.editOpen=!0,r.generico=e),class:"px-2 py-1.5 rounded-none"},{default:h(()=>[u(m(oe),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[b,d.can(["update reporte"])],[y,d.lang().tooltip.edit]]),e.hora_final?n("",!0):f((t(),c(I,{key:0,type:"button",onClick:i=>(r.TerminarOpen=!0,r.generico=e),class:"px-2 py-1.5 rounded-none"},{default:h(()=>[u(m(G),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[b,d.can(["create reporte"])],[y,d.lang().tooltip.finalizarTarea]]),f((t(),c(T,{type:"button",onClick:i=>(r.deleteOpen=!0,r.generico=e),class:"px-2 py-1.5 rounded-none"},{default:h(()=>[u(m(V),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[b,d.can(["delete reporte"])],[y,d.lang().tooltip.delete]])])])]),o("td",nr,p(++C),1),(t(),l(g,null,w(v,i=>o("td",dr,[i.type==="text"?(t(),l("span",ir,p(e[i.order]),1)):n("",!0),i.type==="time"?(t(),l("span",pr,p(m(B)(e[i.order])),1)):n("",!0),i.type==="number"?(t(),l("span",mr,p(m(k)(e[i.order],0,!1)),1)):n("",!0),i.type==="decimal"?(t(),l("span",cr,p(m(k)(e[i.order],1,!1)),1)):n("",!0),i.type==="dinero"?(t(),l("span",ur,p(m(k)(e[i.order],0,!0)),1)):n("",!0),i.type==="date"?(t(),l("span",_r,p(m(x)(e[i.order],"")),1)):n("",!0),i.type==="datetime"?(t(),l("span",fr,p(m(x)(e[i.order],"conLaHora")),1)):n("",!0),i.type==="foreign"?(t(),l("span",yr,p(e[i.nameid]),1)):n("",!0),i.order==="hora_final"&&e[i.order]==null?(t(),l("span",hr,[u(me)])):n("",!0)])),64))]))),128))])])):(t(),l("h2",br,"Sin Registros"))]),s.total>0?(t(),l("div",kr,[u(Q,{links:s.fromController,filters:r.params},null,8,["links","filters"])])):n("",!0)])])]),_:1})}}};export{Hr as default};
