import{k as B,T as N,C as M,x as O,l as F,f as p,a as l,w as d,o as b,b as i,t as c,u as t,F as U,j as D,d as u,n as H,e as T}from"./app-64491542.js";import{_ as v}from"./InputError-fa3e1639.js";import{_ as h,a as P}from"./TextInput-8835f8f7.js";import{_ as q,a as z}from"./SecondaryButton-4a877555.js";import{_ as g}from"./PrimaryButton-4c3adb2e.js";import{C as y}from"./vue-select-d9b12732.js";import"./vue-datepicker-265c879c.js";import{r as L,a as A}from"./XCircleIcon-c3bb26e7.js";const G={class:"space-y-6"},I=["onSubmit"],J={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-6 pb-56 scrollbar-sidebar"},Q={class:""},R={id:"SelectVue"},W=i("label",{name:"labelSelectVue",class:"dark:text-white"}," Centro de trabajo ",-1),X={class:"flex my-5 gap-8"},Y={class:"my-8 flex justify-end"},ne={__name:"Edit",props:{show:Boolean,title:String,generica:Object,titulos:Object,losSelect:Object},emits:["close"],setup(w,{emit:m}){const r=w,a=B({centros:[0],valido:!0,mensajeError:""}),k=r.titulos.map(o=>o.order),e=N({...Object.fromEntries(k.map(o=>[o,""])),centro_id:[r.losSelect[0]]});M(()=>{});const E=[];r.titulos.forEach(o=>{E.push({idd:o.order,label:o.label,type:o.type,value:e[o.order]})});function V(){a.centros.push(0),e.centro_id.push(r.losSelect[0])}let j=()=>{a.centros.length=a.centros.length-1,e.centro_id.length=e.centro_id.length-1};function S(){a.centros=r.generica.centro_trabajos,a.centros.map((o,s)=>{let n={title:o.nombre,value:o.id};return e.centro_id[s]=n,n})}O(()=>{r.show?(e.errors={},r.titulos.forEach(o=>{e[o.order]=r.generica[o.order]})):e.centro_id[0]={title:"Disponibilidad no seleccionada",value:0}}),F(()=>r.show,o=>{o&&S()});let C=()=>{try{if(a.valido=!0,!e.nombre||!e.tipo)throw a.valido=!1,console.log(e.nombre,"form.nombre"),console.log(e.tipo,"form.tipo"),new Error("BreakException");e.centro_id.forEach(o=>{if(o.value===0)throw a.valido=!1,new Error("BreakException")})}catch{a.valido=!1}};const f=()=>{var o;C(),a.valido?e.put(route("disponibilidad.update",(o=r.generica)==null?void 0:o.id),{preserveScroll:!0,onSuccess:()=>{m("close"),e.reset()},onError:()=>null,onFinish:()=>null}):(a.mensajeError="Hay elementos vacios",alert(a.mensajeError))},$=[{title:"Seleccione un tipo",value:0},{title:"Programado",value:"Programado"},{title:"No programado",value:"No programado"}];return(o,s)=>(b(),p("section",G,[l(q,{show:r.show,onClose:s[5]||(s[5]=n=>m("close"))},{default:d(()=>[i("form",{class:"p-6",onSubmit:T(f,["prevent"])},[i("h2",J,c(o.lang().label.edit)+" "+c(r.title),1),i("div",K,[i("div",Q,[l(h,{for:"nombre",value:o.lang().label.nombre},null,8,["value"]),l(P,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:t(e).nombre,"onUpdate:modelValue":s[0]||(s[0]=n=>t(e).nombre=n),required:"",placeholder:o.nombre,error:t(e).errors.nombre},null,8,["modelValue","placeholder","error"]),l(v,{class:"mt-2",message:t(e).errors.nombre},null,8,["message"])]),i("div",null,[l(h,{for:"tipo",value:o.lang().label.Tipo},null,8,["value"]),l(t(y),{options:$,label:"title",class:"mt-1 dark:bg-gray-500 rounded-lg dark:text-gray-600",modelValue:t(e).tipo,"onUpdate:modelValue":s[1]||(s[1]=n=>t(e).tipo=n)},null,8,["modelValue"])]),(b(!0),p(U,null,D(a.centros,(n,_)=>(b(),p("div",R,[W,l(t(y),{options:r.losSelect,label:"title",class:"dark:bg-gray-500 rounded-lg dark:text-gray-600",modelValue:t(e).centro_id[_],"onUpdate:modelValue":x=>t(e).centro_id[_]=x},null,8,["options","modelValue","onUpdate:modelValue"]),l(v,{class:"mt-2",message:t(e).errors.centro_id},null,8,["message"])]))),256)),i("div",X,[l(g,{type:"button",disabled:t(e).processing,onClick:s[2]||(s[2]=n=>V())},{default:d(()=>[l(t(L),{class:"w-6 h-6"}),u(" Mas centros ")]),_:1},8,["disabled"]),l(g,{type:"button",class:"bg-red-500",disabled:t(e).processing,onClick:s[3]||(s[3]=n=>t(j)())},{default:d(()=>[l(t(A),{class:"w-6 h-6"}),u(" Menos centros ")]),_:1},8,["disabled"])])]),i("div",Y,[l(z,{disabled:t(e).processing,onClick:s[4]||(s[4]=n=>m("close"))},{default:d(()=>[u(c(o.lang().button.close),1)]),_:1},8,["disabled"]),l(g,{class:H(["ml-3",{"opacity-25":t(e).processing}]),disabled:t(e).processing,onClick:f},{default:d(()=>[u(c(t(e).processing?o.lang().button.save+"...":o.lang().button.save),1)]),_:1},8,["class","disabled"])])],40,I)]),_:1},8,["show"])]))}};export{ne as default};
